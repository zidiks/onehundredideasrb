(self.webpackChunkmodules=self.webpackChunkmodules||[]).push([[365],{420:e=>{e.exports="<h1>ASSISTANT MODE</h1>"},492:e=>{e.exports='<section id="interfaceMode"> <section id="sympt-stage"> <div class="autocomplete"> <input id="myInput" type="text" name="myAlgorimt" placeholder="поиск симптомов"> <button id="myInputBtn">Добавить</button> </div> <div class="interfaceContent"> <div class="titile-clear"> <span class="title">Симптомы</span> <button id="myClear">Очистить</button> </div> <ul id="myResults"></ul> </div> <div id="analysisBox"> <button id="myAnalysis">Анализировать</button> </div> </section> <section id="desease-stage"> <div class="header-desease"><button id="back" class="btn">Назад</button> <span style="margin-left:1rem" class="title">Возможные заболевания</span></div> <ul id="desease-results"> </ul> </section> <section id="drugs-stage"> <div class="header-desease"><button id="back-last" class="btn">Назад</button> <span style="margin-left:1rem" class="title">Рекомендуемые ЛС</span></div> <ul id="drugs-results"> </ul> </section> </section>'},10:(e,t,n)=>{"use strict";n.r(t)},373:(e,t,n)=>{"use strict";n.r(t)},698:(e,t,n)=>{"use strict";n.r(t)},231:(e,t,n)=>{n(10);const s=n(420);e.exports={template:s,oninit:()=>{console.log("assistantMode ready")}}},600:(e,t,n)=>{n(373);const s=n(492),{db:i}=n(885);e.exports={template:s,oninit:()=>{const e=[];var t=[];const n=[];var s=[],a=[];const o=document.getElementById("myInputBtn"),l=document.getElementById("myInput"),d=document.getElementById("myResults"),c=document.getElementById("myAnalysis"),r=document.getElementById("interfaceMode"),u=document.getElementById("back"),m=document.getElementById("desease-results"),p=document.getElementById("myClear"),g=document.getElementById("back-last");function h(){t=[],d.innerHTML=""}function y(){r.style.transform="translateX(-33.33%)"}function v(){s=[],m.innerHTML="",t.length>0&&(n.forEach(((e,n)=>{let i=0;t.forEach(((t,n)=>{Object.keys(e.symptoms).map((e=>e.trim())).includes(t)&&i++})),i/t.length>.49&&s.push({rate:Math.round(i/t.length*100),description:e.discription,name:e.name,id:n})})),s.sort(((e,t)=>{e.rate,t.rate})),s.length>0?s.forEach((e=>{let s=document.createElement("li");s.classList.add("des-li"),s.innerHTML=`<span style="color:#3eb75d; font-weight: 600;">${e.name}:</span> ${e.description} ${t.length>2?"("+e.rate+"% совпадений)":""}`,s.addEventListener("click",(()=>{a=[],Object.keys(n[e.id].drugs).forEach((s=>{let i=0;t.forEach((t=>{Object.keys(n[e.id].drugs[s].sympt).map((e=>e.trim())).includes(t)&&i++})),i>0&&a.push(s)}));let s=document.getElementById("drugs-results");s.innerHTML="",a.forEach((e=>{let t=document.createElement("div");t.innerHTML=e,s.appendChild(t)})),r.style.transform="translateX(-66.66%)"})),m.appendChild(s)})):m.innerHTML="совпадений не найдено",console.log("Возможные заболевания",s),r.style.transform="translateX(-33.33%)")}function f(){r.style.transform="translateX(0)"}function E(){if(e.includes(l.value)&&!t.includes(l.value)){console.log(l.value);let e=document.createElement("li");e.classList.add("sympt-li"),e.innerHTML=l.value,d.appendChild(e),t.push(l.value),console.log(t),l.value=""}}i.collection("symptoms").get().then((t=>{t.forEach((t=>{e.push(t.id)}))})),i.collection("desease").get().then((e=>{e.forEach((e=>{n.push(e.data())}))})),p.removeEventListener("click",h),p.addEventListener("click",h),u.removeEventListener("click",f),u.addEventListener("click",f),g.removeEventListener("click",y),g.addEventListener("click",y),o.removeEventListener("click",E),o.addEventListener("click",E),c.removeEventListener("click",v),c.addEventListener("click",v),function(e,t){var n;function s(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function i(t){for(var n=document.getElementsByClassName("autocomplete-items"),s=0;s<n.length;s++)t!=n[s]&&t!=e&&n[s].parentNode.removeChild(n[s])}e.addEventListener("input",(function(s){var a,o,l,d=this.value;if(i(),!d)return!1;for(n=-1,(a=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),a.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(a),l=0;l<t.length;l++)if(t[l].toUpperCase().includes(d.toUpperCase())){o=document.createElement("DIV");let n=t[l].toUpperCase().indexOf(d.toUpperCase());o.innerHTML=t[l].substr(0,n),o.innerHTML+="<strong>"+t[l].substr(n,d.length)+"</strong>",o.innerHTML+=t[l].substr(n+d.length),o.innerHTML+="<input type='hidden' value='"+t[l]+"'>",o.addEventListener("click",(function(t){e.value=this.getElementsByTagName("input")[0].value,i()})),a.appendChild(o)}})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(n++,s(t)):38==e.keyCode?(n--,s(t)):13==e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())})),document.addEventListener("click",(function(e){i(e.target)}))}(document.getElementById("myInput"),e)}}},241:(e,t,n)=>{e.exports={pages:{interfaceMode:n(600),assistantMode:n(231)},services:{db:n(675).db}}},675:(e,t)=>{t.db=e=>{console.log("test",e)}},885:(e,t)=>{const n=firebase.initializeApp({apiKey:"AIzaSyDEIgMKdu-0WhVRdGrzh-EiqGme6g1hca0",authDomain:"pharmhelper-6d6dc.firebaseapp.com",projectId:"pharmhelper-6d6dc",storageBucket:"pharmhelper-6d6dc.appspot.com",messagingSenderId:"1018457457757",appId:"1:1018457457757:web:4acb474168f8ae465ef9b4",measurementId:"G-7XEEWN3JNE"});t.db=n.firestore()},339:function(e,t,n){const s=n(241).pages,i=document.getElementsByTagName("routeroutlet")[0],a=e=>{this.routeTo(e.target.getAttribute("to"))};t.routeTo=e=>{i.style.opacity=0,setTimeout((()=>{if(null==s[e])throw`Page "${e}" is not found!`;o(s[e]),Array.from(document.querySelectorAll("z-link")).forEach((e=>{e.addEventListener("click",a)})),setTimeout((()=>{i.style.opacity=1}),250)}),200)};const o=e=>{i.innerHTML=e.template,e.oninit()};this.routeTo("interfaceMode")}}]);